<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en-GB" xml:lang="en-GB" xmlns="http://www.w3.org/1999/xhtml">
  <!-- This file was converted to xhtml by Writer2xhtml ver. 1.0.2. See http://writer2latex.sourceforge.net for more info. -->
  <head profile="http://dublincore.org/documents/dcq-html/">
    <title></title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="" name="description" />
    <meta content="" name="keywords" />
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC" />
    <meta content="" name="DC.title" />
    <meta content="" name="DC.subject" />
    <meta content="" name="DC.description" />
    <meta content="Robin Rawson-Tetley" name="DC.creator" />
    <meta content="2014-02-06T14:58:21" name="DC.date" />
    <meta content="" name="DC.language" />
    <style media="all" type="text/css">
      body {font-family:'Liberation Serif',serif;font-size:16.0px}
      span.NumberingSymbols {}
      a:link {color:#000080;text-decoration:underline}
      p.Standard {margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;font-size:16.0px}
      p.TableContents {margin-left:0;margin-right:0;margin-top:0;margin-bottom:18.859844px;border:none;padding:0;font-size:16.0px}
      p.Contents3 {margin-left:37.71969px;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;text-indent:0;font-size:16.0px}
      p.ContentsHeading {margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;text-indent:0;font-family:Albany,sans-serif;font-weight:bold;font-size:21.333334px}
      p.Textbody {margin-left:0;margin-right:0;margin-top:0;margin-bottom:18.859844px;border:none;padding:0;font-size:16.0px}
      p.Contents2 {margin-left:18.859844px;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;text-indent:0;font-size:16.0px}
      p.Heading {margin-left:0;margin-right:0;margin-top:15.987401px;margin-bottom:18.859844px;border:none;padding:0;font-family:Albany,sans-serif;font-size:18.666668px}
      p.Contents1 {margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;text-indent:0;font-size:16.0px}
      p.PreformattedText {margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;font-family:'DejaVu Sans Mono',monospace;font-size:13.333334px}
      h1 {margin-left:0;margin-right:0;margin-top:15.987401px;margin-bottom:18.859844px;border:none;padding:0;font-family:Thorndale,serif;font-weight:bold;font-size:32.0px;clear:left}
      h2 {margin-left:0;margin-right:0;margin-top:15.987401px;margin-bottom:18.859844px;border:none;padding:0;background-color:transparent;font-family:'Liberation Serif',serif;font-weight:bold;font-size:24.0px;clear:left}
      h3 {margin-left:0;margin-right:0;margin-top:15.987401px;margin-bottom:18.859844px;border:none;padding:0;background-color:transparent;font-family:'Liberation Serif',serif;font-weight:bold;font-size:24.0px;clear:left}
      .frameGraphics {margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border:none;padding:0;font-size:16.0px}
      .frameGraphics p {margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:16.0px}
    </style>
  </head>
  <body>
    <div id="header"><a href="manual.html">First</a> <a href="manual11.html">Previous</a> <a href="manual13.html">Next</a> <a href="manual20.html">Last</a> <a href="manual2.html">Contents</a> </div>
    <div dir="ltr" id="content">
      <h1 id="toc58"><span class="NumberingSymbols">11 </span><a id="RefHeading4445959539258"></a><a id="bkmRefHeading4445959539258"></a>Reports </h1>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">Animal Shelter Manager offers some highly detailed reporting facilities that fall broadly into the following categories.</p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <p class="Textbody">All reports are accessed from the <span style="font-weight:bold">Reports</span> top level-menu. By default, ASM does not install with any reports. You must install them from <span style="font-weight:bold">Settings-&gt;Reports-&gt;Browse sheltermanager.com –</span><span style="font-weight:normal"> this requires your ASM server to have access to the internet. There's an “Install Recommended” button you can use to choose the default set to install.</span></p>
      <p class="Textbody" style="font-weight:normal">Some of the standard, most useful reports you should install are:</p>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody"><span style="font-weight:bold">Long Term Animals</span><a><span style="font-weight:bold">â†“</span></a><span style="font-weight:bold">:</span> Produces a detailed report of animals who have been in the shelter longer than three months. </p>
        </li>
      </ul>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Shelter Inventory:</span> Outputs total figures for every animal on the shelter, broken down by species and their location within the shelter. </p>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Detailed Shelter Inventory:</span> Identical to the Shelter Inventory, except it provides details of the individual animals as well.<br /><br /><img alt="graphics35" class="frameGraphics" id="graphics35graphic" src="manual-img47.png" style="width:626.6079px;height:338.3433px" /><br /></p>
        </li>
      </ul>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">In/Out</span>: Shows a detailed listing of all the animals that entered or left the shelter between two dates. <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">In/Out Summary:</span> Identical to the In/Out report, but only shows the bottom line totals without information about the actual animals. <br /></p>
        </li>
      </ul>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Animals Returned Within Six Months</span>: Produces a detailed report of animals who were returned to the shelter within six months of adoption (allows you to select a date range to filter the animals down to when they were adopted). <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Animals Returned After Six Months:</span> Functionally the same as Animals Returned Within Six Months, except it only shows animals who were returned after six months of adoption. <br /></p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">Returned Animals Report:</span> Produces a detailed report of animals (complete with full adoption histories) who have been returned between the two dates specified. </p>
        </li>
      </ul>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Animal Death Reasons:</span> Produces a report listing all the reasons for which animals have died on the shelter. <br /></p>
        </li>
      </ul>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Monthly Donations:</span> Charts donations taken for animals brought into the shelter and adopted to new owners over the selected year (as well as arbitrary donations). <br /></p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">Monthly Donations By Species:</span> Same as monthly donations, but only for a particular species and does not include arbitrary donations. </p>
        </li>
      </ul>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Monthly Adoptions By Species:</span> Charts the number of adoptions of a particular species over a selected year. <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Monthly Adoptions By Locations:</span> Charts the number of adoptions of a particular species over the different shelter locations over a selected year. <br /><br /><img alt="graphics34" class="frameGraphics" id="graphics34graphic" src="manual-img48.png" style="width:627.0614px;height:354.74646px" /><br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">Animal Entry Reasons:</span> Charts the different reasons for animals entering the shelter over the selected year. <br /></p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">Animal Return Reasons:</span> Charts the different reasons for animals being returned to the shelter over the selected year. </p>
        </li>
      </ul>
      <h2 id="toc59"><span class="NumberingSymbols">11.1 </span><a id="RefHeading4447959539258"></a><a id="bkmRefHeading4447959539258"></a>Customising Reports</h2>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">In addition to the stock reports provided by the sheltermanager.com repository, it is possible to create your own, using a simple language called “SQL” (short for “Structured Query Language”). SQL is a language for retrieving and formatting information - underneath, ASM uses this language to talk to its database (Either MySQL or PostgreSQL - as the names imply, they all talk SQL).</p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">The reports editing screen is located under the <span style="font-weight:bold">Settings</span> menu, any reports you create will integrate into the Reports menu. You can also use this screen to rearrange and rename existing reports and charts in the system. You can also assign “view roles” to reports. If you assign one or more view roles, then only users in those roles will be able to run the report and see its output.</p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">In addition to just creating queries, you can then format how the data is transformed and displayed to you in the format of a report. Again, this is done through the use of another language - HTML (HyperText Markup Language). This is the same language used for creating web pages on the internet. Note however that the report editor has a button to automatically run your query and generate the HTML for you in a simple table format. It is worthwhile running this and then modifying the HTML afterwards. </p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <p class="Textbody">For some excellent beginner tutorials on both SQL and HTML, see <a href="http://www.w3schools.com/">www.w3schools.com</a> </p>
      <h3 id="toc60"><span class="NumberingSymbols">11.1.1 </span><a id="RefHeading4533959539258"></a><a id="bkmRefHeading4533959539258"></a>SQL Keys</h3>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">This all seems very well, but what happens if you want to create a report that needs to request specific information from the user before running - eg: To filter between two dates, or only show animals of a particular species, etc?</p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <p class="Textbody">ASM offers SQL preprocessor instructions to allow you to substitute system information, or information requested from the user at report generation time. </p>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$USER$</span> - Substitutes the current user's name. <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$CURRENT_DATE$</span> - Substitutes today's date in an appropriate string SQL format for the current database. This saves you having to use NOW() or CURRENT_DATE() or various other SQL functions specific to one database.<br /></p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">$PARENTKEY$</span> - Substitutes the field value named in the report calling this subreport. For example, a report could pass an Animal ID as the parent key to a subreport for filtering data correctly. When you use this key in your report SQL, ASM assumes that this report is a subreport and will not display it on the menu. </p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">AS money[fieldname]</span> – If you alias an output field so that it has the prefix “money” as its name, the report engine will make sure it's formatted as a currency and assume that its value is a whole integer money amount (where 1 is 1 cent/pence/etc).</p>
        </li>
      </ul>
      <h3 id="toc61"><span class="NumberingSymbols">11.1.2 </span><a id="RefHeading4535959539258"></a><a id="bkmRefHeading4535959539258"></a><a id="tocSubsection1092"></a><a id="bkmtocSubsection1092"></a>ASK</h3>
      <p class="Textbody">Ask is quite a detailed key, which requests information from the user at generation time. The basic syntax is this: </p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$ASK [DATE | [ALL]ANIMAL | LITTER | SPECIES | LOCATION | TYPE | NUMBER | STRING] [Message]$</p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">Note that if you are substituting any kind of string value (ASK DATE or ASK STRING), you must wrap the ASK key inside string delimiters (the apostrophe ') otherwise you will get SQL errors. </p>
      <p class="Textbody">The types are outlined below: </p>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK DATE message$</span> - requests a date from the user. A popup is displayed containing the message and the user is given an ASM date control to use to select the date. The value substituted is the date selected by the user in SQL string format appropriate for the database you are using.<br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK ANIMAL$ </span>- requests an animal. The value substituted is the animal ID. </p>
        </li>
      </ul>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK PERSON$ </span>- requests an person. The value substituted is the person ID. <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK LITTER$</span> - requests a litter identifier. A popup displays a list of the recent, active litters on the system. The value returned is the litter ID as a string. <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK SPECIES$</span> - requests a species from the user. A popup is displayed containing a dropdown of all species on the system with an additional entry for “all”. The value substituted is the ID of the selected species, or 0 if “all” was selected (use the SQL CASE statement to adapt the WHERE clause for all)<br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK LOCATION$</span> - requests an internal location from the user in the same manner as $ASK SPECIES$ <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK VOUCHER$</span> - requests a voucher from the user in the same manner as $ASK SPECIES$ <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK DIET$</span> - requests a diet from the user in the same manner as $ASK SPECIES$ <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK TYPE$</span> - requests an animal type from the user in the same manner as $ASK SPECIES$ <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$ASK NUMBER message$</span> - requests a numeric value from the user. A box is popped up containing the message and the user is given a standard text box to enter the number in. They will not be allowed to continue until a valid number is entered. The value returned is the number. <br /></p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">$ASK STRING message$</span> - requests a string value from the user (eg: Name, Address, etc.). A box is popped up containing the message and the user is given a text box to enter the string in. The value substituted is the string. </p>
        </li>
      </ul>
      <h3 id="toc62"><span class="NumberingSymbols">11.1.3 </span><a id="RefHeading4537959539258"></a><a id="bkmRefHeading4537959539258"></a><a id="tocSubsection1093"></a><a id="bkmtocSubsection1093"></a>VAR</h3>
      <p class="Textbody">VAR works just like ASK, the only difference is that instead of substituting the value into the SQL, it stores it to a variable name. You can then substitute the variable multiple times in your SQL. </p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$VAR &lt;varname&gt; [DATE | [ALL]ANIMAL | LITTER | SPECIES | LOCATION | TYPE | NUMBER | STRING] [Message]$</p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">The VAR tag should appear in your SQL before you reference the variable created. The variable is substituted with $@varname$ </p>
      <p class="Textbody">This example shows a list of animals of a selected species brought in after the given date. The species and broughtinafter variables could be reused as many times as we like. </p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$VAR species SPECIES$<br />$VAR broughtinafter DATE The date the animals were brought in after$</p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">SELECT AnimalName, DateBroughtIn FROM animal <br />WHERE SpeciesID=$@species$ AND DateBroughtIn &gt;= '$@broughtinafter$'</p>
      <h3 id="toc63"><span class="NumberingSymbols">11.1.4 </span><a id="RefHeading4539959539258"></a><a id="bkmRefHeading4539959539258"></a>Report Grouping and Calculations </h3>
      <p class="Textbody">In addition, ASM allows you to do a number of transformations to the output HTML. You define a number of “blocks” to your reports. Anyone who has used a reporting tool (eg: Microsoft Access or Crystal) will recognise these. </p>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$$HEADER ... HEADER$$</span> - The topmost section of the report should be entered here.<br /> </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$$FOOTER ... FOOTER$$</span> - The bottom most section of the report should be entered here. <br /></p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">$$BODY ... BODY$$</span> - The main section of your report where the detail goes. <br /></p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">$$GROUP_&lt;field&gt; .. GROUP$$</span> - Optional grouping level. If you want to group by a particular field in the formatted output, you should add a group block. Within the group block you must also define a <span style="font-weight:bold">$$HEAD</span> and <span style="font-weight:bold">$$FOOT</span> section. </p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">$$NODATA … NODATA$$$</span> - A special block to output if the report query returns no data.</p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">$$HTMLHEADER … HTMLHEADER$$$</span> - Override the report template HTML header and supply a new one instead.</p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">$$HTMLFOOTER … HTMLFOOTER$$$</span> - Override the report template HTML footer and supply a new one instead.</p>
        </li>
      </ul>
      <p class="Textbody">For example, to group on the OwnerName field: </p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$GROUP_OwnerName<br />$HEAD<br />&lt;h2&gt;$OwnerName&lt;/h2&gt;<br />$FOOT<br />&lt;p&gt;Number of owners with name '$OwnerName': {COUNT.OwnerName}&lt;/p&gt;</p>
      <p class="Textbody">ASM also offers a number of calculation instructions you may use in group <span style="font-weight:bold">$$FOOT</span> blocks and the main <span style="font-weight:bold">$$FOOTER</span> block. These are: </p>
      <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{SUM.&lt;field&gt;[.round]}</span> - Calculates the total of a given field for a group. Optionally, you can specify the number of decimal places to round to. </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{COUNT.&lt;field&gt;}</span> - Calculates the number of records in a group (the field is ignored) </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{AVG.&lt;field&gt;[.round]}</span> - Calculates the average of a group, based on the total of the field and the number of records. Optionally, you can specify the number of decimal places to round to. </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{MIN.&lt;field&gt;}</span> - Shows the smallest value for a given field in a group </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{MAX.&lt;field&gt;}</span> - Shows the largest value for a given field in a group </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{FIRST.&lt;field&gt;} -</span> Returns the first value for a given field in a group </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{IMAGE.&lt;animalid&gt;[.seq]} – </span><span style="font-weight:normal">(also valid in $$BODY) </span>Returns a URL to the preferred image for the given animal ID. Animal IDs can be a $field from the selected data. If the optional sequence number is given, then a link to image seq (where seq is a 1-based count) for the animal is output instead. If seq is invalid, or the animal doesn't have a preferred image the default system nopic.jpg file is used instead.</p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{QR.&lt;animalid&gt;[.size]} – </span><span style="font-weight:normal">(also valid in $$BODY) </span>Returns a URL to the google charting api to generate a QR code with a link to this animal's record for mobile devices. If size is not set, then 150x150 is used. Eg: {QR.$ID.200x200}</p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{LAST.&lt;field&gt;}</span> - Returns the last value for a given field in a group </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{PCT.&lt;field&gt;.&lt;value&gt;[.round]} -</span> Returns the percentage of rows in the group where field &lt;field&gt; matches value &lt;value&gt;. Optionally, you can specify a number of decimal places to round to. Eg: {PCT.Sex.1.2} Would show the percentage of male animals in the group, rounded to 2 decimal places. </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0"><span style="font-weight:bold">{SQL.&lt;sql command&gt;}</span> - executes the SQL and outputs the value of the first field. Eg: {SQL.SELECT COUNT(*) FROM animal}. This tag is also available in the <span style="font-weight:bold">$$BODY</span> block and can be used in conjunction with the field tags to produce a subquery. Eg: Suppose you wanted to show the number of movements attached to a particular animal without doing a group query with an inner join to adoption. You could just use {SQL.SELECT COUNT(*) FROM adoption WHERE AnimalID = $ID} </p>
        </li>
        <li>
          <p class="Textbody"><span style="font-weight:bold">{SUBREPORT.&lt;title&gt;.&lt;parentkey&gt;}</span> - executes the custom report with [title] and with the [parentkey] being the name of a field from the current report data to pass down to the subreport. The report output is embedded in the current report. You can use the $PARENTKEY$ field in the subreport to access this value for filtering your data. Note that you can nest reports to an unlimited depth. </p>
        </li>
      </ul>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">Here is an example report to show all animals currently on the shelter, with their picture, grouped by their internal location and giving totals for each. </p>
      <p class="Textbody"><span style="font-weight:bold"><br />SQL:</span> </p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">SELECT animal.ID, animal.AnimalName, animal.ShelterCode, internalLocation.LocationName<br />FROM animal<br />INNER JOIN internallocation ON <br />animal.ShelterLocation = internallocation.ID<br />WHERE animal.Archived = 0<br />ORDER BY internalLocation.LocationName</p>
      <p class="Textbody"><span style="font-weight:bold">HTML:</span> </p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$$HEADER<br />HEADER$$</p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$$GROUP_LocationName<br />$$HEAD<br />&lt;h2&gt;$LocationName&lt;/h2&gt;<br />&lt;table&gt;<br />&lt;tr&gt;<br />&lt;th&gt;Name&lt;/th&gt;<br />&lt;th&gt;Code&lt;/th&gt;<br />&lt;th&gt;Picture&lt;/th&gt;<br />&lt;/tr&gt;<br />$$FOOT<br />&lt;/table&gt;<br />&lt;p&gt;&lt;b&gt;Total at $LocationName: {COUNT.AnimalName}&lt;/b&gt;&lt;/p&gt;<br />GROUP$$</p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$$BODY<br />&lt;tr&gt;<br />&lt;td&gt;$AnimalName&lt;/td&gt;<br />&lt;td&gt;$ShelterCode&lt;/td&gt;<br />&lt;td&gt;&lt;img src={IMAGE.$ID} width=300 height=200 /&gt;&lt;/td&gt;<br />&lt;/tr&gt;<br />BODY$$</p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">$$FOOTER<br />FOOTER$$</p>
      <h2 id="toc64"><span class="NumberingSymbols">11.2 </span><a id="RefHeading4449959539258"></a><a id="bkmRefHeading4449959539258"></a>Charts</h2>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">
        <img alt="graphics55" class="frameGraphics" id="graphics55graphic" src="manual-img49.png" style="width:464.01263px;height:560.01263px" />
      </p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0">Charts work just like the reports. The difference is that instead of generating HTML, you just  choose a chart type from the type dropdown.</p>
      <p class="Textbody" style="margin-top:0;margin-bottom:0"> </p>
      <p class="Textbody">ASM will dissect the results of the query in the following way to generate a graph, depending on whether your query returns two or three columns.</p>
      <h3 id="toc65"><span class="NumberingSymbols">11.2.1 </span><a id="RefHeading4451959539258"></a><a id="bkmRefHeading4451959539258"></a>Two columns</h3>
      <ol style="margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0">Each row in your result data becomes a point on the X axis </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0">The first column in each row is assumed to contain the name used for the label on the X axis. Only string data should be used for the first column. </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0">Each subsequent column is assumed to be a piece of data at that point on the X axis (and thus gives the Y axis its scale). Only numeric data can appear in columns after the first one. </p>
        </li>
        <li>
          <p class="Textbody">The fieldname of each column after the label column is used to denote the data on the legend. </p>
        </li>
      </ol>
      <p class="Textbody">For example, this SQL will produce a graph that shows the amount of donations from animal movements each year. Following our scheme, the Year column being first is the X axis label, TotalAmount is the first datapoint for that item on the X axis. </p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">SELECT YEAR(DateReceived) AS Year, <br />SUM(ownerdonation.Donation) AS TotalAmount <br />FROM ownerdonation<br />WHERE MovementID &gt; 0<br />GROUP BY YEAR(DateReceived) <br />ORDER BY Year</p>
      <p class="Textbody">Would produce data that might look something like: </p>
      <table cellspacing="0" id="Table1table" style="margin-top:0;margin-bottom:0;margin-right:auto;width:240.98268px;border-collapse:separate;border-spacing:0;table-layout:fixed">
        <tr>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:107.3008px">
            <p class="TableContents" style="text-align:center;font-weight:bold">Year </p>
          </td>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:126.31181px">
            <p class="TableContents" style="text-align:center;font-weight:bold">TotalAmount </p>
          </td>
        </tr>
        <tr>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:107.3008px">
            <p class="TableContents" style="text-align:center">2004 </p>
          </td>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:126.31181px">
            <p class="TableContents" style="text-align:center">59840.00 </p>
          </td>
        </tr>
        <tr>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:107.3008px">
            <p class="TableContents" style="text-align:center">2005 </p>
          </td>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:126.31181px">
            <p class="TableContents" style="text-align:center">61893.00 </p>
          </td>
        </tr>
        <tr>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:107.3008px">
            <p class="TableContents" style="text-align:center">2006 </p>
          </td>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:126.31181px">
            <p class="TableContents" style="text-align:center">51039.10 </p>
          </td>
        </tr>
        <tr>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:107.3008px">
            <p class="TableContents" style="text-align:center">2007 </p>
          </td>
          <td style="border:none;padding:1.8519686px;vertical-align:top;width:126.31181px">
            <p class="TableContents" style="text-align:center">55984.00 </p>
          </td>
        </tr>
      </table>
      <p class="Textbody"><br />Note that the graphs use a relative scale, interpreted from the data. If all of your column data is the same value, then the graph will not display because it has no variance. </p>
      <h3 id="toc66"><span class="NumberingSymbols">11.2.2 </span><a id="RefHeading4453959539258"></a><a id="bkmRefHeading4453959539258"></a>Three Columns</h3>
      <ol style="margin-top:0;margin-bottom:0;list-style-type:decimal;clear:left">
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0">Each row in your result data becomes a point on the X axis </p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0">The first column in each row is assumed to contain the name used for a series.</p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0">The second column in each row contains the X axis label.</p>
        </li>
        <li>
          <p class="Textbody" style="margin-top:0;margin-bottom:0">The third column contains the value for the Y axis and must be numeric.</p>
        </li>
      </ol>
      <p class="Textbody"><br />For example, this SQL produces a graph that shows the number of donations made for over a year by internal location. Each location becomes a series with a set of data points for each month of the year.</p>
      <p class="PreformattedText" style="margin-top:0;margin-bottom:18.859844px">SELECT i.LocationName, <br />MONTH(ad.MovementDate) AS bimonth,<br />COUNT(ad.Donation) AS total<br />FROM adoption ad<br />INNER JOIN animal a ON ad.AnimalID = a.ID<br />INNER JOIN internallocation i ON i.ID = a.ShelterLocation<br />WHERE YEAR(ad.MovementDate) = $ASK STRING Which year to display for?$<br />AND ad.MovementType = 1<br />GROUP BY i.LocationName, MONTH(ad.MovementDate)</p>
    </div>
    <div id="footer"><a href="manual.html">First</a> <a href="manual11.html">Previous</a> <a href="manual13.html">Next</a> <a href="manual20.html">Last</a> <a href="manual2.html">Contents</a> </div>
  </body>
</html>
