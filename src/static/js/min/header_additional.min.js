
$(function(){if(common.current_url().indexOf("/login")!=-1||common.current_url().indexOf("/database")!=-1){return;}
additional={YESNO:0,TEXT:1,NOTES:2,NUMBER:3,DATE:4,MONEY:5,LOOKUP:6,MULTI_LOOKUP:7,ANIMAL_LOOKUP:8,PERSON_LOOKUP:9,additional_fields:function(fields){if(fields.length==0){return;}
var add=[],other=[],addidx=0;add.push('<table width=\"100%\">\n<tr>\n');other.push('<table class=\"additionalmove\" style=\"display: none\"><tr>\n');$.each(fields,function(i,f){var fieldname=f.ID;var fieldid="add_"+fieldname;var postattr="a."+f.MANDATORY+"."+fieldname;var fh=[];if(f.FIELDTYPE==additional.YESNO){var checked="";if(f.VALUE==1){checked='checked="checked"';}
fh.push('<td class="to'+f.LINKTYPE+'"></td><td>');fh.push('<input id="'+fieldid+'" type="checkbox" class="asm-checkbox additional" data-post="'+postattr+'" ');fh.push('title="'+html.title(f.TOOLTIP)+'" '+checked+' />');fh.push('<label for="'+fieldid+'" title="'+html.title(f.TOOLTIP)+'">'+f.FIELDLABEL+'</label></td>');}
else if(f.FIELDTYPE==additional.TEXT){fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<input id="'+fieldid+'" type="textbox" class="asm-textbox additional" data-post="'+postattr+'" ');fh.push('title="'+html.title(f.TOOLTIP)+'" value="'+html.title(f.VALUE)+'"/></td>');}
else if(f.FIELDTYPE==additional.DATE){fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<input id="'+fieldid+'" type="textbox" class="asm-textbox asm-datebox additional" data-post="'+postattr+'" ');fh.push('title="'+html.title(f.TOOLTIP)+'" value="'+html.title(f.VALUE)+'" /></td>');}
else if(f.FIELDTYPE==additional.NOTES){fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<textarea id="'+fieldid+'" data-post="'+postattr+'" class="asm-textareafixed additional" ');fh.push('title="'+html.title(f.TOOLTIP)+'">'+f.VALUE+'</textarea>');}
else if(f.FIELDTYPE==additional.NUMBER){fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<input id="'+fieldid+'" type="textbox" class="asm-textbox asm-numberbox additional" data-post="'+postattr+'" ');fh.push('title="'+html.title(f.TOOLTIP)+'" value="'+html.title(f.VALUE)+'"/></td>');}
else if(f.FIELDTYPE==additional.MONEY){fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<input id="'+fieldid+'" type="textbox" class="asm-textbox asm-currencybox additional" data-post="'+postattr+'" ');fh.push('title="'+html.title(f.TOOLTIP)+'" value="'+format.currency(f.VALUE)+'"/></td>');}
else if(f.FIELDTYPE==additional.LOOKUP){var opts=[],cv=$.trim(common.nulltostr(f.VALUE));$.each(f.LOOKUPVALUES.split("|"),function(io,vo){vo=$.trim(vo);if(cv==vo){opts.push('<option selected="selected">'+vo+'</option>');}
else{opts.push('<option>'+vo+'</option>');}});fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<select id="'+fieldid+'" class="asm-selectbox additional" data-post="'+postattr+'" ');fh.push('title="'+html.title(f.TOOLTIP)+'">');fh.push(opts.join("\n"));fh.push('</select></td>');}
else if(f.FIELDTYPE==additional.MULTI_LOOKUP){var mopts=[],mcv=$.trim(common.nulltostr(f.VALUE)).split(",");$.each(f.LOOKUPVALUES.split("|"),function(io,vo){vo=$.trim(vo);if($.inArray(vo,mcv)!=-1){mopts.push('<option selected="selected">'+vo+'</option>');}
else{mopts.push('<option>'+vo+'</option>');}});fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<select id="'+fieldid+'" class="asm-bsmselect additional" multiple="multiple" data-post="'+postattr+'" ');fh.push('title="'+html.title(f.TOOLTIP)+'">');fh.push(mopts.join("\n"));fh.push('</select></td>');}
else if(f.FIELDTYPE==additional.ANIMAL_LOOKUP){fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<input id="'+fieldid+'" type="hidden" class="asm-animalchooser" data-post="'+postattr+'" ');fh.push('value="'+html.title(f.VALUE)+'"/></td>');}
else if(f.FIELDTYPE==additional.PERSON_LOOKUP){fh.push('<td class="to'+f.LINKTYPE+'"><label for="'+fieldid+'">'+f.FIELDLABEL+'</label></td><td>');fh.push('<input id="'+fieldid+'" type="hidden" class="asm-personchooser" data-post="'+postattr+'" ');fh.push('value="'+html.title(f.VALUE)+'"/></td>');}
if(f.LINKTYPE==0||f.LINKTYPE==1||f.LINKTYPE==9||f.LINKTYPE==11||f.LINKTYPE==13){add.push(fh.join("\n"));addidx+=1;if(addidx==3){add.push("</tr><tr>");addidx=0;}}
else{other.push(fh.join("\n"));}});add.push("</tr></table>");other.push("</tr></table>");return add.join("\n")+other.join("\n");}};});